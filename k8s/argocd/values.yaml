# ArgoCD configuration values
argo-cd:
  # Global settings
  global:
    image:
      tag: "v3.0.3"

  # Server configuration
  server:
    # Disable TLS for local development
    extraArgs:
      - --insecure

    # Service configuration
    service:
      type: NodePort
      nodePortHttp: 30080
      nodePortHttps: 30443
      servicePortHttp: 80
      servicePortHttps: 443

  # Controller configuration
  controller:
    replicas: 1

  # Redis configuration
  redis:
    enabled: true

  # Repo server configuration
  repoServer:
    replicas: 1

  # Application set controller
  applicationSet:
    enabled: true
    replicas: 1

  # Notifications controller
  notifications:
    enabled: true

  # Dex (SSO) configuration - disabled for local development
  dex:
    enabled: false

  # Config settings
  configs:
    # Configure repositories
    repositories: {}

    # Credential templates
    credentialTemplates: {}

    # ArgoCD secret settings
    secret:
      createSecret: true
      argocdServerAdminPassword: ""

    # Config Map settings
    cm:
      admin.enabled: "true"
      timeout.reconciliation: 180s
      statusbadge.enabled: "true"
      application.resourceTrackingMethod: annotation

    # RBAC settings
    rbac:
      policy.default: role:readonly
      policy.csv: |
        g, admin, role:admin

    # Parameters
    params:
      server.insecure: true

# App of Apps pattern configuration
appOfApps:
  enabled: true
  repoURL: "https://github.com/ouznoreyni/spring-k8s-gitops.git"
  targetRevision: HEAD
  path: k8s/apps
  prune: true
  selfHeal: true
